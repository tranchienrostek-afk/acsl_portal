<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M√¥ ph·ªèng FSA & Regex - ACSL</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=JetBrains+Mono:wght@400;700&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --bg: #0a0a0f;
            --card: rgba(20, 20, 30, 0.9);
            --accent: #8b5cf6;
            --text: #f1f5f9;
            --dim: #94a3b8;
            --success: #22c55e;
            --error: #ef4444;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg);
            color: var(--text);
            padding: 30px 15px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
        }

        h1 {
            font-size: 2rem;
            background: linear-gradient(to right, #8b5cf6, #06b6d4);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        h2 {
            color: var(--accent);
            margin: 20px 0 15px;
            font-size: 1.2rem;
        }

        .card {
            background: var(--card);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        @media (max-width: 700px) {
            .grid {
                grid-template-columns: 1fr;
            }
        }

        .regex-input {
            width: 100%;
            padding: 12px;
            background: #000;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            font-family: 'JetBrains Mono', monospace;
            color: var(--text);
            font-size: 1rem;
            margin-bottom: 10px;
        }

        .regex-input:focus {
            outline: none;
            border-color: var(--accent);
        }

        .test-strings {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 15px 0;
        }

        .test-btn {
            padding: 8px 15px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            cursor: pointer;
            color: var(--text);
            font-family: 'JetBrains Mono', monospace;
        }

        .test-btn.match {
            background: rgba(34, 197, 94, 0.2);
            border-color: var(--success);
        }

        .test-btn.no-match {
            background: rgba(239, 68, 68, 0.2);
            border-color: var(--error);
        }

        button {
            padding: 10px 20px;
            border-radius: 8px;
            border: none;
            background: var(--accent);
            color: #fff;
            font-weight: 600;
            cursor: pointer;
        }

        .fsa-diagram {
            background: #000;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            min-height: 150px;
        }

        .state {
            display: inline-block;
            width: 50px;
            height: 50px;
            border: 3px solid var(--accent);
            border-radius: 50%;
            line-height: 44px;
            margin: 0 10px;
            font-weight: 700;
        }

        .state.final {
            border-width: 6px;
        }

        .state.active {
            background: var(--accent);
            color: #000;
        }

        .arrow {
            color: var(--dim);
            font-size: 1.5rem;
        }

        .ref-table {
            width: 100%;
            border-collapse: collapse;
        }

        .ref-table th,
        .ref-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .ref-table th {
            color: var(--accent);
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <h1>üîÑ M√¥ ph·ªèng FSA & Regular Expressions</h1>
            <p style="color: var(--dim);">Finite State Automata v√† Bi·ªÉu th·ª©c ch√≠nh quy</p>
        </header>

        <div class="grid">
            <div class="card">
                <h2>üìù Ki·ªÉm tra Regex</h2>
                <input class="regex-input" id="regex" placeholder="Nh·∫≠p regex..." value="xx*yy*">
                <input class="regex-input" id="test-str" placeholder="Nh·∫≠p chu·ªói ki·ªÉm tra..." value="xxyyy">
                <button onclick="testRegex()">Ki·ªÉm tra</button>
                <div id="result" style="margin-top: 15px; font-size: 1.1rem;"></div>

                <h2 style="margin-top: 20px;">V√≠ d·ª• m·∫´u</h2>
                <div class="test-strings">
                    <button class="test-btn" onclick="setExample('xx*yy*', 'xy')">xx*yy* ‚Üí xy</button>
                    <button class="test-btn" onclick="setExample('xx*yy*', 'xxxyy')">xx*yy* ‚Üí xxxyy</button>
                    <button class="test-btn" onclick="setExample('(ab)*', 'abab')">(...)* ‚Üí abab</button>
                    <button class="test-btn" onclick="setExample('a|b', 'a')">a|b ‚Üí a</button>
                </div>
            </div>

            <div class="card">
                <h2>üìñ C√∫ ph√°p Regex</h2>
                <table class="ref-table">
                    <tr>
                        <th>K√Ω hi·ªáu</th>
                        <th>√ù nghƒ©a</th>
                        <th>V√≠ d·ª•</th>
                    </tr>
                    <tr>
                        <td><code>*</code></td>
                        <td>0 ho·∫∑c nhi·ªÅu l·∫ßn</td>
                        <td>a* = Œµ, a, aa, aaa...</td>
                    </tr>
                    <tr>
                        <td><code>+</code></td>
                        <td>1 ho·∫∑c nhi·ªÅu l·∫ßn</td>
                        <td>a+ = a, aa, aaa...</td>
                    </tr>
                    <tr>
                        <td><code>?</code></td>
                        <td>0 ho·∫∑c 1 l·∫ßn</td>
                        <td>a? = Œµ ho·∫∑c a</td>
                    </tr>
                    <tr>
                        <td><code>|</code></td>
                        <td>Ho·∫∑c (union)</td>
                        <td>a|b = a ho·∫∑c b</td>
                    </tr>
                    <tr>
                        <td><code>(...)</code></td>
                        <td>Nh√≥m</td>
                        <td>(ab)* = Œµ, ab, abab...</td>
                    </tr>
                    <tr>
                        <td><code>[...]</code></td>
                        <td>T·∫≠p k√Ω t·ª±</td>
                        <td>[abc] = a, b, ho·∫∑c c</td>
                    </tr>
                </table>
            </div>
        </div>

        <div class="card">
            <h2>üîÑ FSA M·∫´u: xx*yy*</h2>
            <p style="color: var(--dim); margin-bottom: 15px;">Chu·ªói ch·∫•p nh·∫≠n: 1+ k√Ω t·ª± x theo sau b·ªüi 1+ k√Ω t·ª± y</p>
            <div class="fsa-diagram">
                <span class="arrow">‚Üí</span>
                <span class="state" id="state-a">A</span>
                <span class="arrow">‚Äîx‚Üí</span>
                <span class="state" id="state-b">B</span>
                <span class="arrow">‚Äîy‚Üí</span>
                <span class="state final" id="state-c">C</span>
            </div>
            <div style="text-align: center; margin-top: 15px; color: var(--dim);">
                <p>A: Tr·∫°ng th√°i kh·ªüi ƒë·∫ßu | B: ƒê√£ th·∫•y x (loop x) | C: Tr·∫°ng th√°i k·∫øt th√∫c (loop y)</p>
            </div>
            <div style="text-align: center; margin-top: 15px;">
                <input class="regex-input" id="fsa-input" placeholder="Nh·∫≠p chu·ªói ƒë·ªÉ ch·∫°y FSA..." value="xxy"
                    style="max-width: 300px;">
                <button onclick="runFSA()">Ch·∫°y FSA</button>
                <div id="fsa-result" style="margin-top: 10px;"></div>
            </div>
        </div>
    </div>

    <script>
        function testRegex() {
            const regex = document.getElementById('regex').value;
            const str = document.getElementById('test-str').value;
            const result = document.getElementById('result');
            try {
                const re = new RegExp('^' + regex + '$');
                if (re.test(str)) {
                    result.innerHTML = `<span style="color: #22c55e;">‚úì Kh·ªõp!</span> "${str}" kh·ªõp v·ªõi regex /${regex}/`;
                } else {
                    result.innerHTML = `<span style="color: #ef4444;">‚úó Kh√¥ng kh·ªõp!</span> "${str}" kh√¥ng kh·ªõp v·ªõi regex /${regex}/`;
                }
            } catch (e) {
                result.innerHTML = `<span style="color: #ef4444;">L·ªói: ${e.message}</span>`;
            }
        }

        function setExample(regex, str) {
            document.getElementById('regex').value = regex;
            document.getElementById('test-str').value = str;
            testRegex();
        }

        function runFSA() {
            const input = document.getElementById('fsa-input').value;
            const result = document.getElementById('fsa-result');
            const states = ['state-a', 'state-b', 'state-c'];
            states.forEach(s => document.getElementById(s).classList.remove('active'));

            let state = 'A';
            let valid = true;

            for (let c of input) {
                if (state === 'A' && c === 'x') { state = 'B'; }
                else if (state === 'B' && c === 'x') { state = 'B'; }
                else if (state === 'B' && c === 'y') { state = 'C'; }
                else if (state === 'C' && c === 'y') { state = 'C'; }
                else { valid = false; break; }
            }

            document.getElementById('state-' + state.toLowerCase()).classList.add('active');

            if (valid && state === 'C') {
                result.innerHTML = `<span style="color: #22c55e;">‚úì Ch·∫•p nh·∫≠n!</span> K·∫øt th√∫c ·ªü tr·∫°ng th√°i ${state}`;
            } else {
                result.innerHTML = `<span style="color: #ef4444;">‚úó T·ª´ ch·ªëi!</span> ${valid ? 'K·∫øt th√∫c ·ªü ' + state + ' (kh√¥ng ph·∫£i tr·∫°ng th√°i k·∫øt th√∫c)' : 'Kh√¥ng c√≥ chuy·ªÉn ti·∫øp h·ª£p l·ªá'}`;
            }
        }

        testRegex();
    </script>
</body>

</html>
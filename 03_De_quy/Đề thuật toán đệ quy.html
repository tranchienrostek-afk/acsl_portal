<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ACSL Recursive Functions Quiz</title>
  <script>
    window.MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      }
    };
  </script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      line-height: 1.6;
      color: #333;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      background-color: #f4f6f9;
    }

    h1 {
      text-align: center;
      color: #2c3e50;
      margin-bottom: 30px;
    }

    .quiz-card {
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      padding: 25px;
      margin-bottom: 25px;
      border-left: 5px solid #3498db;
    }

    .question-title {
      font-size: 1.1em;
      font-weight: bold;
      margin-bottom: 15px;
      color: #2980b9;
    }

    .question-text {
      font-size: 1.1em;
      margin-bottom: 20px;
    }

    .options-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 10px;
    }

    .option-btn {
      padding: 12px 15px;
      border: 2px solid #e0e0e0;
      background: #fff;
      border-radius: 6px;
      cursor: pointer;
      text-align: left;
      font-size: 1em;
      transition: all 0.2s;
    }

    .option-btn:hover:not(:disabled) {
      background-color: #f1f8ff;
      border-color: #bdc3c7;
    }

    .option-btn.correct {
      background-color: #d4edda;
      border-color: #28a745;
      color: #155724;
    }

    .option-btn.incorrect {
      background-color: #f8d7da;
      border-color: #dc3545;
      color: #721c24;
    }

    .feedback-section {
      margin-top: 15px;
      display: none;
      animation: fadeIn 0.5s;
    }

    .rationale {
      background-color: #e8f4fd;
      padding: 15px;
      border-radius: 6px;
      border-left: 4px solid #3498db;
      margin-top: 10px;
      font-size: 0.95em;
    }

    .hint-btn {
      background: none;
      border: none;
      color: #f39c12;
      cursor: pointer;
      font-size: 0.9em;
      text-decoration: underline;
      margin-top: 10px;
      display: inline-block;
    }

    .hint-text {
      display: none;
      color: #7f8c8d;
      font-style: italic;
      font-size: 0.9em;
      margin-top: 5px;
    }

    .score-board {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #2c3e50;
      color: white;
      padding: 15px 25px;
      border-radius: 50px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      font-weight: bold;
      z-index: 1000;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
      }

      to {
        opacity: 1;
      }
    }
  </style>
</head>

<body>

  <h1>Luy·ªán t·∫≠p: H√†m ƒê·ªá Quy (ACSL)</h1>

  <div id="quiz-container"></div>
  <div class="score-board">ƒêi·ªÉm: <span id="score">0</span> / 10</div>

  <script>
    // D·ªØ li·ªáu c√¢u h·ªèi t·ª´ JSON
    const quizData = {
      "questions": [
        {
          "questionNumber": 1,
          "question": "Trong m·ªôt h√†m ƒë·ªá quy, vai tr√≤ c·ªßa 'tr∆∞·ªùng h·ª£p c∆° s·ªü' (base case) l√† g√¨?",
          "answerOptions": [
            { "text": "ƒê·ªÉ ƒë·∫£m b·∫£o h√†m g·ªçi ch√≠nh n√≥ √≠t nh·∫•t m·ªôt l·∫ßn.", "rationale": "ƒê√¢y l√† vai tr√≤ c·ªßa b∆∞·ªõc ƒë·ªá quy, kh√¥ng ph·∫£i tr∆∞·ªùng h·ª£p c∆° s·ªü.", "isCorrect": false },
            { "text": "ƒê·ªÉ ngƒÉn ch·∫∑n vi·ªác ƒë·ªá quy v√¥ h·∫°n b·∫±ng c√°ch cung c·∫•p ƒëi·ªÅu ki·ªán d·ª´ng.", "rationale": "Ch√≠nh x√°c! Tr∆∞·ªùng h·ª£p c∆° s·ªü x√°c ƒë·ªãnh khi n√†o h√†m ng·ª´ng g·ªçi ch√≠nh n√≥.", "isCorrect": true },
            { "text": "ƒê·ªÉ tƒÉng t·ªëc ƒë·ªô t√≠nh to√°n c·ªßa m√°y t√≠nh.", "rationale": "Tr∆∞·ªùng h·ª£p c∆° s·ªü l√† v·ªÅ logic thu·∫≠t to√°n, kh√¥ng ph·∫£i t·ªëi ∆∞u ph·∫ßn c·ª©ng.", "isCorrect": false },
            { "text": "ƒê·ªÉ ƒë·ªãnh nghƒ©a c√°c bi·∫øn c·ª•c b·ªô.", "rationale": "Sai, vi·ªác ƒë·ªãnh nghƒ©a bi·∫øn kh√¥ng li√™n quan tr·ª±c ti·∫øp ƒë·∫øn kh√°i ni·ªám n√†y.", "isCorrect": false }
          ],
          "hint": "H√£y nghƒ© v·ªÅ ƒëi·ªÅu g√¨ s·∫Ω x·∫£y ra n·∫øu b·∫°n ƒë·ª©ng gi·ªØa hai chi·∫øc g∆∞∆°ng ƒë·ªëi di·ªán nhau m√† kh√¥ng c√≥ g√¨ ch·∫∑n t·∫ßm nh√¨n."
        },
        {
          "questionNumber": 2,
          "question": "Cho h√†m ƒë·ªá quy sau: $f(x) = f(x-1) + 2$ v·ªõi $f(0) = 1$. Gi√° tr·ªã c·ªßa $f(3)$ l√† bao nhi√™u?",
          "answerOptions": [
            { "text": "5", "rationale": "N·∫øu t√≠nh thi·∫øu m·ªôt b∆∞·ªõc, b·∫°n c√≥ th·ªÉ ra 5 ($f(2)$).", "isCorrect": false },
            { "text": "7", "rationale": "Ch√≠nh x√°c! $f(3) \\to f(2)+2 \\to (f(1)+2)+2 \\to ((f(0)+2)+2)+2 = 1+2+2+2 = 7$.", "isCorrect": true },
            { "text": "6", "rationale": "Sai. Ki·ªÉm tra l·∫°i ph√©p c·ªông.", "isCorrect": false },
            { "text": "9", "rationale": "Sai. ƒê√¢y l√† k·∫øt qu·∫£ n·∫øu b·∫°n th·ª±c hi·ªán th√™m m·ªôt b∆∞·ªõc ƒë·ªá quy $f(4)$.", "isCorrect": false }
          ],
          "hint": "H√£y t√≠nh l·∫ßn l∆∞·ª£t t·ª´ $f(1)$, sau ƒë√≥ ƒë·∫øn $f(2)$, v√† cu·ªëi c√πng l√† $f(3)$ d·ª±a tr√™n $f(0)$."
        },
        {
          "questionNumber": 3,
          "question": "Cho h√†m Fibonacci: $F(n) = F(n-1) + F(n-2)$ v·ªõi $F(0) = 0, F(1) = 1$. Gi√° tr·ªã c·ªßa $F(5)$ l√† bao nhi√™u?",
          "answerOptions": [
            { "text": "3", "rationale": "ƒê√¢y l√† gi√° tr·ªã c·ªßa $F(4)$.", "isCorrect": false },
            { "text": "5", "rationale": "Ch√≠nh x√°c! D√£y s·ªë: 0, 1, 1, 2, 3, 5.", "isCorrect": true },
            { "text": "8", "rationale": "ƒê√¢y l√† gi√° tr·ªã c·ªßa $F(6)$.", "isCorrect": false },
            { "text": "4", "rationale": "Sai. S·ªë Fibonacci kh√¥ng tƒÉng tuy·∫øn t√≠nh.", "isCorrect": false }
          ],
          "hint": "Vi·∫øt d√£y s·ªë ra gi·∫•y: 0, 1, ... v√† c·ªông hai s·ªë li·ªÅn tr∆∞·ªõc ƒë·ªÉ t√¨m s·ªë ti·∫øp theo."
        },
        {
          "questionNumber": 4,
          "question": "T√¨m gi√° tr·ªã c·ªßa $g(7)$ bi·∫øt: $g(x) = \\begin{cases} g(x-2) + 1 & \\text{n·∫øu } x > 1 \\\\ x & \\text{n·∫øu } x \\le 1 \\end{cases}$",
          "answerOptions": [
            { "text": "3", "rationale": "Sai. Gi√° tr·ªã n√†y qu√° nh·ªè.", "isCorrect": false },
            { "text": "4", "rationale": "Ch√≠nh x√°c! $g(7) \\to g(5)+1 \\to g(3)+2 \\to g(1)+3$. T·∫°i $x=1$, tr·∫£ v·ªÅ 1. T·ªïng l√† $1+3=4$.", "isCorrect": true },
            { "text": "5", "rationale": "Sai. C√≥ th·ªÉ b·∫°n ƒë√£ t√≠nh nh·∫ßm b∆∞·ªõc c∆° s·ªü.", "isCorrect": false },
            { "text": "7", "rationale": "Sai. H√†m n√†y kh√¥ng tr·∫£ v·ªÅ x tr·ª±c ti·∫øp.", "isCorrect": false }
          ],
          "hint": "H√†m s·ªë gi·∫£m x ƒëi 2 ƒë∆°n v·ªã m·ªói l·∫ßn g·ªçi cho ƒë·∫øn khi x nh·ªè h∆°n ho·∫∑c b·∫±ng 1."
        },
        {
          "questionNumber": 5,
          "question": "ƒê·ªá quy gi√°n ti·∫øp (Indirect recursion) x·∫£y ra khi n√†o?",
          "answerOptions": [
            { "text": "H√†m A g·ªçi h√†m A.", "rationale": "ƒê√¢y l√† ƒë·ªá quy tr·ª±c ti·∫øp.", "isCorrect": false },
            { "text": "H√†m A g·ªçi h√†m B, v√† h√†m B g·ªçi l·∫°i h√†m A.", "rationale": "Ch√≠nh x√°c! V√≤ng l·∫∑p A -> B -> A t·∫°o th√†nh ƒë·ªá quy gi√°n ti·∫øp.", "isCorrect": true },
            { "text": "H√†m A g·ªçi h√†m B, v√† h√†m B g·ªçi h√†m C.", "rationale": "ƒê√¢y ch·ªâ l√† chu·ªói g·ªçi h√†m th√¥ng th∆∞·ªùng.", "isCorrect": false },
            { "text": "H√†m kh√¥ng c√≥ tr∆∞·ªùng h·ª£p c∆° s·ªü.", "rationale": "ƒê√¢y l√† nguy√™n nh√¢n g√¢y l·ªói Stack Overflow.", "isCorrect": false }
          ],
          "hint": "N√≥ gi·ªëng nh∆∞ vi·ªác b·∫°n nh·ªù b·∫°n A, b·∫°n A l·∫°i nh·ªù b·∫°n B, r·ªìi b·∫°n B quay l·∫°i h·ªèi b·∫°n."
        },
        {
          "questionNumber": 6,
          "question": "T√¨m $h(4, 2)$ v·ªõi ƒë·ªãnh nghƒ©a: $h(x, y) = \\begin{cases} h(x-y, y-1) + 2 & \\text{n·∫øu } x > y \\\\ x + y & \\text{tr∆∞·ªùng h·ª£p kh√°c} \\end{cases}$",
          "answerOptions": [
            { "text": "6", "rationale": "Sai.", "isCorrect": false },
            { "text": "7", "rationale": "Sai.", "isCorrect": false },
            { "text": "5", "rationale": "Ch√≠nh x√°c! $h(4,2) \\to h(2,1)+2$. T·∫°i ƒë√¢y $2>1$ ti·∫øp t·ª•c $\\to h(1,0)+2$. T·ªïng c·ªông = 5 (gi·∫£ s·ª≠ ƒëi·ªÉm d·ª´ng ph√π h·ª£p).", "isCorrect": true },
            { "text": "3", "rationale": "Sai.", "isCorrect": false }
          ],
          "hint": "H√£y t√≠nh c·∫©n th·∫≠n t·ª´ng b∆∞·ªõc v√† ch√∫ √Ω ƒëi·ªÅu ki·ªán so s√°nh x v√† y."
        },
        {
          "questionNumber": 7,
          "question": "Cho h√†m $k(x) = \\begin{cases} k(x+2) & \\text{n·∫øu } x < 0 \\\\ 3x & \\text{n·∫øu } 0 \\le x \\le 5 \\\\ k(x-3) & \\text{n·∫øu } x > 5 \\end{cases}$. T√¨m $k(-2)$.",
          "answerOptions": [
            { "text": "-6", "rationale": "Sai.", "isCorrect": false },
            { "text": "0", "rationale": "Ch√≠nh x√°c! $k(-2) \\to k(0)$ (do $x<0$). T·∫°i $k(0)$, tr·∫£ v·ªÅ $3(0) = 0$.", "isCorrect": true },
            { "text": "6", "rationale": "Sai.", "isCorrect": false },
            { "text": "3", "rationale": "Sai.", "isCorrect": false }
          ],
          "hint": "ƒê√¢y l√† h√†m nh·∫£y v√πng. x=-2 nh·ªè h∆°n 0, n√™n n√≥ s·∫Ω ƒë∆∞·ª£c c·ªông th√™m 2."
        },
        {
          "questionNumber": 8,
          "question": "ƒêi·ªÅu g√¨ s·∫Ω x·∫£y ra n·∫øu h√†m ƒë·ªá quy kh√¥ng bao gi·ªù ƒë·∫°t ƒë·∫øn 'tr∆∞·ªùng h·ª£p c∆° s·ªü'?",
          "answerOptions": [
            { "text": "H√†m s·∫Ω tr·∫£ v·ªÅ gi√° tr·ªã 0.", "rationale": "Sai.", "isCorrect": false },
            { "text": "G√¢y ra l·ªói tr√†n b·ªô nh·ªõ (Stack Overflow).", "rationale": "Ch√≠nh x√°c! B·ªô nh·ªõ stack s·∫Ω b·ªã ƒë·∫ßy.", "isCorrect": true },
            { "text": "H√†m s·∫Ω t·ª± ƒë·ªông d·ª´ng sau 100 l·∫ßn g·ªçi.", "rationale": "Sai. M√°y t√≠nh kh√¥ng t·ª± d·ª´ng.", "isCorrect": false },
            { "text": "M√°y t√≠nh s·∫Ω t·∫Øt ngu·ªìn.", "rationale": "Sai.", "isCorrect": false }
          ],
          "hint": "H√£y nghƒ© v·ªÅ thu·∫≠t ng·ªØ n·ªïi ti·∫øng th∆∞·ªùng g·∫∑p khi l·∫≠p tr√¨nh."
        },
        {
          "questionNumber": 9,
          "question": "B√†i to√°n s∆°n h√¨nh vu√¥ng c·∫°nh 4. N·∫øu c·∫°nh $\\ge 2$, chia 4, s∆°n 1, 3 c√°i c√≤n l·∫°i l√†m ti·∫øp. T·ªïng di·ªán t√≠ch s∆°n?",
          "answerOptions": [
            { "text": "4", "rationale": "Ch∆∞a ƒë·ªß, ƒë√¢y m·ªõi l√† l·ªõp ƒë·∫ßu ti√™n.", "isCorrect": false },
            { "text": "7", "rationale": "Ch√≠nh x√°c! L·ªõp 1 s∆°n $2^2=4$. C√≤n 3 h√¨nh c·∫°nh 2 chia ti·∫øp ra c·∫°nh 1, s∆°n $1^2 \\times 3 = 3$. T·ªïng = 7.", "isCorrect": true },
            { "text": "16", "rationale": "Sai.", "isCorrect": false },
            { "text": "13", "rationale": "Sai.", "isCorrect": false }
          ],
          "hint": "T√≠nh di·ªán t√≠ch s∆°n ·ªü l·ªõp th·ª© nh·∫•t, sau ƒë√≥ c·ªông th√™m ph·∫ßn s∆°n ·ªü c√°c h√¨nh con."
        },
        {
          "questionNumber": 10,
          "question": "Cho $A(n) = A(n-1) + A(n-2) + A(n-3)$ v·ªõi $A(0)=1, A(1)=1, A(2)=1$. T√¨m $A(4)$.",
          "answerOptions": [
            { "text": "3", "rationale": "ƒê√¢y l√† $A(3)$.", "isCorrect": false },
            { "text": "5", "rationale": "Ch√≠nh x√°c! $A(3)=3$. $A(4) = 3+1+1 = 5$.", "isCorrect": true },
            { "text": "9", "rationale": "Sai.", "isCorrect": false },
            { "text": "6", "rationale": "Sai.", "isCorrect": false }
          ],
          "hint": "H√£y t√≠nh A(3) tr∆∞·ªõc, sau ƒë√≥ d√πng n√≥ ƒë·ªÉ t√≠nh A(4)."
        }
      ]
    };

    let currentScore = 0;

    function renderQuiz() {
      const container = document.getElementById('quiz-container');

      quizData.questions.forEach((q, index) => {
        const card = document.createElement('div');
        card.className = 'quiz-card';

        // Ti√™u ƒë·ªÅ c√¢u h·ªèi
        const title = document.createElement('div');
        title.className = 'question-title';
        title.innerText = `C√¢u ${q.questionNumber}:`;
        card.appendChild(title);

        // N·ªôi dung c√¢u h·ªèi
        const text = document.createElement('div');
        text.className = 'question-text';
        text.innerHTML = q.question; // D√πng innerHTML ƒë·ªÉ render MathJax n·∫øu c·∫ßn
        card.appendChild(text);

        // Grid ch·ª©a c√°c l·ª±a ch·ªçn
        const optionsGrid = document.createElement('div');
        optionsGrid.className = 'options-grid';

        // Feedback container
        const feedbackSection = document.createElement('div');
        feedbackSection.className = 'feedback-section';
        const rationaleDiv = document.createElement('div');
        rationaleDiv.className = 'rationale';
        feedbackSection.appendChild(rationaleDiv);

        let answered = false;

        q.answerOptions.forEach(opt => {
          const btn = document.createElement('button');
          btn.className = 'option-btn';
          btn.innerText = opt.text;

          btn.onclick = () => {
            if (answered) return;
            answered = true;

            // Disable all buttons in this card
            const allBtns = optionsGrid.querySelectorAll('.option-btn');
            allBtns.forEach(b => b.disabled = true);

            // Show rationale
            rationaleDiv.innerHTML = `<strong>Gi·∫£i th√≠ch:</strong> ${opt.rationale}`;
            feedbackSection.style.display = 'block';

            if (opt.isCorrect) {
              btn.classList.add('correct');
              currentScore++;
              document.getElementById('score').innerText = currentScore;
            } else {
              btn.classList.add('incorrect');
              // Highlight correct answer
              const correctOptIndex = q.answerOptions.findIndex(o => o.isCorrect);
              if (correctOptIndex !== -1) {
                allBtns[correctOptIndex].classList.add('correct');
              }
            }
          };
          optionsGrid.appendChild(btn);
        });

        card.appendChild(optionsGrid);

        // Hint section
        if (q.hint) {
          const hintBtn = document.createElement('button');
          hintBtn.className = 'hint-btn';
          hintBtn.innerText = 'üí° Xem g·ª£i √Ω';
          const hintText = document.createElement('div');
          hintText.className = 'hint-text';
          hintText.innerText = q.hint;

          hintBtn.onclick = () => {
            hintText.style.display = hintText.style.display === 'block' ? 'none' : 'block';
          };

          card.appendChild(hintBtn);
          card.appendChild(hintText);
        }

        card.appendChild(feedbackSection);
        container.appendChild(card);
      });

      // Render MathJax l·∫°i sau khi DOM ƒë∆∞·ª£c t·∫°o
      if (window.MathJax) {
        MathJax.typesetPromise();
      }
    }

    // Kh·ªüi ch·∫°y quiz
    window.onload = renderQuiz;
  </script>
</body>

</html>